swagger: '2.0'
info:
  contact:
    name: HyperFleet Team
  description: >-
    HyperFleet API provides simple CRUD operations for managing cluster
    resources and their status history.


    **Architecture**: Simple CRUD only, no business logic, no event creation.

    Sentinel operator handles all orchestration logic.

    Adapters handle the specifics of managing spec
  license:
    name: Apache 2.0
    url: 'https://www.apache.org/licenses/LICENSE-2.0'
  title: HyperFleet API
  version: 1.0.4
host: hyperfleet.redhat.com
basePath: /
schemes:
  - https
paths:
  /api/hyperfleet/v1/clusters:
    get:
      produces:
        - application/json
        - application/problem+json
      parameters:
        - description: >-
            Filter results using TSL (Tree Search Language) query syntax.

            Examples: `status.conditions.Ready='True'`, `name in ('c1','c2')`,
            `labels.region='us-east'`
          in: query
          name: search
          required: false
          type: string
        - default: 1
          format: int32
          in: query
          name: page
          required: false
          type: integer
        - default: 20
          format: int32
          in: query
          name: pageSize
          required: false
          type: integer
        - default: created_time
          in: query
          name: orderBy
          required: false
          type: string
        - enum:
            - asc
            - desc
          in: query
          name: order
          required: false
          type: string
      responses:
        '200':
          description: The request has succeeded.
          schema:
            $ref: '#/definitions/ClusterList'
        '400':
          description: The server could not understand the request due to invalid syntax.
        default:
          description: An unexpected error response.
          schema:
            $ref: '#/definitions/Error'
      security:
        - BearerAuth: []
      operationId: getClusters
      summary: List clusters
    post:
      consumes:
        - application/json
      produces:
        - application/json
        - application/problem+json
      parameters:
        - in: body
          name: body
          required: true
          schema:
            $ref: '#/definitions/ClusterCreateRequest'
      responses:
        '201':
          description: >-
            The request has succeeded and a new resource has been created as a
            result.
          schema:
            $ref: '#/definitions/Cluster'
        '400':
          description: The server could not understand the request due to invalid syntax.
        default:
          description: An unexpected error response.
          schema:
            $ref: '#/definitions/Error'
      security:
        - BearerAuth: []
      description: >-
        Create a new cluster resource.


        **Note**: The `status` object in the response is read-only and computed
        by the service.

        It is NOT part of the request body. Initially,

        status.conditions will include mandatory "Available" and "Ready"
        conditions.
      operationId: postCluster
      summary: Create cluster
  '/api/hyperfleet/v1/clusters/{cluster_id}':
    get:
      produces:
        - application/json
        - application/problem+json
      parameters:
        - description: >-
            Filter results using TSL (Tree Search Language) query syntax.

            Examples: `status.conditions.Ready='True'`, `name in ('c1','c2')`,
            `labels.region='us-east'`
          in: query
          name: search
          required: false
          type: string
        - in: path
          name: cluster_id
          required: true
          type: string
      responses:
        '200':
          description: The request has succeeded.
          schema:
            $ref: '#/definitions/Cluster'
        '400':
          description: The server could not understand the request due to invalid syntax.
        default:
          description: An unexpected error response.
          schema:
            $ref: '#/definitions/Error'
      security:
        - BearerAuth: []
      operationId: getClusterById
      summary: Get cluster by ID
  '/api/hyperfleet/v1/clusters/{cluster_id}/nodepools':
    get:
      produces:
        - application/json
        - application/problem+json
      parameters:
        - description: Cluster ID
          in: path
          name: cluster_id
          required: true
          type: string
        - description: >-
            Filter results using TSL (Tree Search Language) query syntax.

            Examples: `status.conditions.Ready='True'`, `name in ('c1','c2')`,
            `labels.region='us-east'`
          in: query
          name: search
          required: false
          type: string
        - default: 1
          format: int32
          in: query
          name: page
          required: false
          type: integer
        - default: 20
          format: int32
          in: query
          name: pageSize
          required: false
          type: integer
        - default: created_time
          in: query
          name: orderBy
          required: false
          type: string
        - enum:
            - asc
            - desc
          in: query
          name: order
          required: false
          type: string
      responses:
        '200':
          description: The request has succeeded.
          schema:
            $ref: '#/definitions/NodePoolList'
        '400':
          description: The server could not understand the request due to invalid syntax.
        default:
          description: An unexpected error response.
          schema:
            $ref: '#/definitions/Error'
      security:
        - BearerAuth: []
      description: Returns the list of all nodepools for a cluster
      operationId: getNodePoolsByClusterId
      summary: List all nodepools for cluster
    post:
      consumes:
        - application/json
      produces:
        - application/json
        - application/problem+json
      parameters:
        - description: Cluster ID
          in: path
          name: cluster_id
          required: true
          type: string
        - in: body
          name: body
          required: true
          schema:
            $ref: '#/definitions/NodePoolCreateRequest'
      responses:
        '201':
          description: >-
            The request has succeeded and a new resource has been created as a
            result.
          schema:
            $ref: '#/definitions/NodePoolCreateResponse'
        '400':
          description: The server could not understand the request due to invalid syntax.
        default:
          description: An unexpected error response.
          schema:
            $ref: '#/definitions/Error'
      security:
        - BearerAuth: []
      description: Create a NodePool for a cluster
      operationId: createNodePool
      summary: Create nodepool
  '/api/hyperfleet/v1/clusters/{cluster_id}/nodepools/{nodepool_id}':
    get:
      produces:
        - application/json
        - application/problem+json
      parameters:
        - description: Cluster ID
          in: path
          name: cluster_id
          required: true
          type: string
        - description: NodePool ID
          in: path
          name: nodepool_id
          required: true
          type: string
      responses:
        '200':
          description: The request has succeeded.
          schema:
            $ref: '#/definitions/NodePool'
        '400':
          description: The server could not understand the request due to invalid syntax.
        default:
          description: An unexpected error response.
          schema:
            $ref: '#/definitions/Error'
      security:
        - BearerAuth: []
      description: Returns specific nodepool
      operationId: getNodePoolById
      summary: Get nodepool by ID
  '/api/hyperfleet/v1/clusters/{cluster_id}/nodepools/{nodepool_id}/statuses':
    get:
      produces:
        - application/json
        - application/problem+json
      parameters:
        - description: Cluster ID
          in: path
          name: cluster_id
          required: true
          type: string
        - in: path
          name: nodepool_id
          required: true
          type: string
        - description: >-
            Filter results using TSL (Tree Search Language) query syntax.

            Examples: `status.conditions.Ready='True'`, `name in ('c1','c2')`,
            `labels.region='us-east'`
          in: query
          name: search
          required: false
          type: string
        - default: 1
          format: int32
          in: query
          name: page
          required: false
          type: integer
        - default: 20
          format: int32
          in: query
          name: pageSize
          required: false
          type: integer
        - default: created_time
          in: query
          name: orderBy
          required: false
          type: string
        - enum:
            - asc
            - desc
          in: query
          name: order
          required: false
          type: string
      responses:
        '200':
          description: The request has succeeded.
          schema:
            $ref: '#/definitions/AdapterStatusList'
        '400':
          description: The server could not understand the request due to invalid syntax.
        default:
          description: An unexpected error response.
          schema:
            $ref: '#/definitions/Error'
      description: Returns adapter status reports for this nodepool
      operationId: getNodePoolsStatuses
      summary: List all adapter statuses for nodepools
  '/api/hyperfleet/v1/clusters/{cluster_id}/statuses':
    get:
      produces:
        - application/json
      parameters:
        - description: Cluster ID
          in: path
          name: cluster_id
          required: true
          type: string
        - description: >-
            Filter results using TSL (Tree Search Language) query syntax.

            Examples: `status.conditions.Ready='True'`, `name in ('c1','c2')`,
            `labels.region='us-east'`
          in: query
          name: search
          required: false
          type: string
        - default: 1
          format: int32
          in: query
          name: page
          required: false
          type: integer
        - default: 20
          format: int32
          in: query
          name: pageSize
          required: false
          type: integer
        - default: created_time
          in: query
          name: orderBy
          required: false
          type: string
        - enum:
            - asc
            - desc
          in: query
          name: order
          required: false
          type: string
      responses:
        '200':
          description: The request has succeeded.
          schema:
            $ref: '#/definitions/AdapterStatusList'
        '400':
          description: The server could not understand the request due to invalid syntax.
        '404':
          description: The server cannot find the requested resource.
      security:
        - BearerAuth: []
      description: Returns adapter status reports for this cluster
      operationId: getClusterStatuses
      summary: List all adapter statuses for cluster
  /api/hyperfleet/v1/nodepools:
    get:
      produces:
        - application/json
        - application/problem+json
      parameters:
        - description: >-
            Filter results using TSL (Tree Search Language) query syntax.

            Examples: `status.conditions.Ready='True'`, `name in ('c1','c2')`,
            `labels.region='us-east'`
          in: query
          name: search
          required: false
          type: string
        - default: 1
          format: int32
          in: query
          name: page
          required: false
          type: integer
        - default: 20
          format: int32
          in: query
          name: pageSize
          required: false
          type: integer
        - default: created_time
          in: query
          name: orderBy
          required: false
          type: string
        - enum:
            - asc
            - desc
          in: query
          name: order
          required: false
          type: string
      responses:
        '200':
          description: The request has succeeded.
          schema:
            $ref: '#/definitions/NodePoolList'
        '400':
          description: The server could not understand the request due to invalid syntax.
        default:
          description: An unexpected error response.
          schema:
            $ref: '#/definitions/Error'
      security:
        - BearerAuth: []
      description: Returns the list of all nodepools
      operationId: getNodePools
      summary: List all nodepools for cluster
definitions:
  AcceleratorSpec:
    properties:
      count:
        minimum: 1
        type: integer
      type:
        type: string
    required:
      - type
      - count
    type: object
  AdapterCondition:
    description: >-
      Condition in AdapterStatus

      Used for standard Kubernetes condition types: "Available", "Applied",
      "Health"

      Note: observed_generation is at AdapterStatus level, not per-condition,

      since all conditions in one AdapterStatus share the same observed
      generation
    properties:
      last_transition_time:
        description: >-
          When this condition last transitioned status (API-managed)

          Only updated when status changes (True/False), not when reason/message
          changes
        format: date-time
        type: string
      message:
        description: Human-readable message
        type: string
      reason:
        description: Machine-readable reason code
        type: string
      status:
        $ref: '#/definitions/AdapterConditionStatus'
      type:
        description: Condition type
        type: string
    required:
      - type
      - last_transition_time
      - status
    type: object
  AdapterConditionStatus:
    description: Status value for adapter conditions
    enum:
      - 'True'
      - 'False'
      - Unknown
    type: string
  AdapterStatus:
    description: |-
      AdapterStatus represents the complete status report from an adapter
      Contains multiple conditions, job metadata, and adapter-specific data
    example:
      adapter: adapter1
      conditions:
        - last_transition_time: '2021-01-01T10:00:00Z'
          message: This adapter1 is available
          reason: This adapter1 is available
          status: 'True'
          type: Available
        - last_transition_time: '2021-01-01T10:00:00Z'
          message: Adapter1 validation job applied successfully
          reason: Validation job applied
          status: 'True'
          type: Applied
        - last_transition_time: '2021-01-01T10:00:00Z'
          message: All adapter1 runtime operations completed successfully
          reason: All adapter1 operations completed successfully
          status: 'True'
          type: Health
      created_time: '2021-01-01T10:00:00Z'
      data:
        validation_results:
          failed: 0
          passed: 30
          total_tests: 30
      last_report_time: '2021-01-01T10:02:00Z'
      metadata:
        attempt: 1
        completed_time: '2021-01-01T10:02:00Z'
        duration: 2m
        job_name: validator-job-abc123
        job_namespace: hyperfleet-system
        started_time: '2021-01-01T10:00:00Z'
      observed_generation: 1
    properties:
      adapter:
        description: 'Adapter name (e.g., "validator", "dns", "provisioner")'
        type: string
      conditions:
        description: |-
          Kubernetes-style conditions tracking adapter state
          Typically includes: Available, Applied, Health
        items:
          $ref: '#/definitions/AdapterCondition'
        type: array
      created_time:
        description: When this adapter status was first created (API-managed)
        format: date-time
        type: string
      data:
        additionalProperties: {}
        description: Adapter-specific data (structure varies by adapter type)
        type: object
      last_report_time:
        description: >-
          When this adapter last reported its status (API-managed)

          Updated every time the adapter POSTs, even if conditions haven't
          changed

          Used by Sentinel to detect adapter liveness
        format: date-time
        type: string
      metadata:
        description: Job execution metadata
        properties:
          attempt:
            format: int32
            type: integer
          completed_time:
            format: date-time
            type: string
          duration:
            type: string
          job_name:
            type: string
          job_namespace:
            type: string
          started_time:
            format: date-time
            type: string
        type: object
      observed_generation:
        description: Which generation of the resource this status reflects
        format: int32
        type: integer
    required:
      - adapter
      - observed_generation
      - conditions
      - created_time
      - last_report_time
    type: object
  AdapterStatusList:
    description: List of adapter statuses with pagination metadata
    example:
      items:
        - adapter: adapter1
          conditions:
            - last_transition_time: '2021-01-01T10:00:00Z'
              message: This adapter1 is available
              reason: This adapter1 is available
              status: 'True'
              type: Available
          created_time: '2021-01-01T10:00:00Z'
          last_report_time: '2021-01-01T10:02:00Z'
          metadata:
            duration: 2m
            job_name: validator-job-abc123
          observed_generation: 1
        - adapter: adapter2
          conditions:
            - last_transition_time: '2021-01-01T10:01:00Z'
              message: This adapter2 is available
              reason: This adapter2 is available
              status: 'True'
              type: Available
          created_time: '2021-01-01T10:01:00Z'
          last_report_time: '2021-01-01T10:01:30Z'
          observed_generation: 1
      kind: AdapterStatusList
      page: 1
      size: 2
      total: 2
    properties:
      items:
        items:
          $ref: '#/definitions/AdapterStatus'
        type: array
      kind:
        type: string
      page:
        format: int32
        type: integer
      size:
        format: int32
        type: integer
      total:
        format: int32
        type: integer
    required:
      - kind
      - page
      - size
      - total
      - items
    type: object
  AutoscalingSpec:
    properties:
      enabled:
        type: boolean
      maxNodes:
        minimum: 1
        type: integer
      minNodes:
        minimum: 0
        type: integer
      scaleDownDelay:
        type: string
      scaleUpDelay:
        type: string
      targetCPUUtilization:
        maximum: 100
        minimum: 1
        type: integer
      targetMemoryUtilization:
        maximum: 100
        minimum: 1
        type: integer
    type: object
  BearerAuth:
    properties:
      scheme:
        enum:
          - bearer
        type: string
      type:
        enum:
          - http
        type: string
    required:
      - type
      - scheme
    type: object
  Cluster:
    example:
      created_by: user-123@example.com
      created_time: '2021-01-01T00:00:00Z'
      generation: 1
      href: 'https://api.hyperfleet.com/v1/clusters/cluster-123'
      id: cluster-123
      kind: Cluster
      labels:
        environment: production
        team: platform
      name: cluster-123
      spec:
        dns:
          baseDomain: example.com
        networking:
          clusterNetwork:
            - cidr: 10.10.0.0/16
              hostPrefix: 24
          serviceNetwork:
            - 10.96.0.0/12
        platform:
          gcp:
            network: network-123
            projectID: project-123
            region: us-central1
            subnet: subnet-123
            zone: us-central1-a
          type: gcp
        release:
          image: 'registry.redhat.io/openshift4/ose-cluster-version-operator:v4.14.0'
          version: 4.14.0
      status:
        conditions:
          - created_time: '2021-01-01T10:00:00Z'
            last_transition_time: '2021-01-01T10:00:00Z'
            last_updated_time: '2021-01-01T10:00:00Z'
            message: All adapters reported Ready True for the current generation
            observed_generation: 1
            reason: All adapters reported Ready True for the current generation
            status: 'True'
            type: Ready
          - created_time: '2021-01-01T10:00:00Z'
            last_transition_time: '2021-01-01T10:00:00Z'
            last_updated_time: '2021-01-01T10:00:00Z'
            message: All adapters reported Available True for the same generation
            observed_generation: 1
            reason: All adapters reported Available True for the same generation
            status: 'True'
            type: Available
          - created_time: '2021-01-01T10:00:00Z'
            last_transition_time: '2021-01-01T10:00:00Z'
            last_updated_time: '2021-01-01T10:00:00Z'
            message: This adapter1 is available
            observed_generation: 1
            reason: This adapter1 is available
            status: 'True'
            type: Adapter1Successful
          - created_time: '2021-01-01T10:01:00Z'
            last_transition_time: '2021-01-01T10:01:00Z'
            last_updated_time: '2021-01-01T10:01:00Z'
            message: This adapter2 is available
            observed_generation: 1
            reason: This adapter2 is available
            status: 'True'
            type: Adapter2Successful
      updated_by: user-123@example.com
      updated_time: '2021-01-01T00:00:00Z'
    properties:
      created_by:
        format: email
        type: string
      created_time:
        format: date-time
        type: string
      generation:
        description: >-
          Generation field is updated on customer updates, reflecting the
          version of the "intent" of the customer
        format: int32
        minimum: 1
        type: integer
      href:
        description: Resource URI
        type: string
      id:
        description: Resource identifier
        type: string
      kind:
        description: Resource kind
        type: string
      labels:
        additionalProperties:
          type: string
        description: 'labels for the API resource as pairs of name:value strings'
        type: object
      name:
        description: Cluster name (unique)
        maxLength: 63
        minLength: 3
        pattern: '^[a-z0-9]([-a-z0-9]*[a-z0-9])?$'
        type: string
      spec:
        $ref: '#/definitions/ClusterSpec'
      status:
        $ref: '#/definitions/ClusterStatus'
      updated_by:
        format: email
        type: string
      updated_time:
        format: date-time
        type: string
    required:
      - name
      - spec
      - created_time
      - updated_time
      - created_by
      - updated_by
      - generation
      - status
    type: object
  ClusterCreateRequest:
    example:
      kind: Cluster
      labels:
        environment: production
        team: platform
      name: cluster-123
      spec:
        dns:
          baseDomain: example.com
        networking:
          clusterNetwork:
            - cidr: 10.10.0.0/16
              hostPrefix: 24
          serviceNetwork:
            - 10.96.0.0/12
        platform:
          gcp:
            network: network-123
            projectID: project-123
            region: us-central1
            subnet: subnet-123
            zone: us-central1-a
          type: gcp
        release:
          image: 'registry.redhat.io/openshift4/ose-cluster-version-operator:v4.14.0'
          version: 4.14.0
    properties:
      href:
        description: Resource URI
        type: string
      id:
        description: Resource identifier
        type: string
      kind:
        description: Resource kind
        type: string
      labels:
        additionalProperties:
          type: string
        description: 'labels for the API resource as pairs of name:value strings'
        type: object
      name:
        description: Cluster name (unique)
        maxLength: 63
        minLength: 3
        pattern: '^[a-z0-9]([-a-z0-9]*[a-z0-9])?$'
        type: string
      spec:
        $ref: '#/definitions/ClusterSpec'
    required:
      - name
      - spec
    type: object
  ClusterList:
    properties:
      items:
        items:
          $ref: '#/definitions/Cluster'
        type: array
      kind:
        type: string
      page:
        format: int32
        type: integer
      size:
        format: int32
        type: integer
      total:
        format: int32
        type: integer
    required:
      - kind
      - page
      - size
      - total
      - items
    type: object
  ClusterNetworkEntry:
    properties:
      cidr:
        type: string
      hostPrefix:
        type: integer
    type: object
  ClusterPlatform:
    properties:
      network:
        type: string
      projectID:
        type: string
      region:
        type: string
      subnet:
        type: string
      zone:
        type: string
    type: object
  ClusterPlatformSpec:
    properties:
      gcp:
        $ref: '#/definitions/ClusterPlatform'
      type:
        enum:
          - gcp
        type: string
    required:
      - type
      - gcp
    type: object
  ClusterSpec:
    properties:
      dns:
        $ref: '#/definitions/DNSSpec'
      infraID:
        type: string
      networking:
        $ref: '#/definitions/NetworkingSpec'
      platform:
        $ref: '#/definitions/ClusterPlatformSpec'
      release:
        $ref: '#/definitions/ReleaseSpec'
    required:
      - platform
    type: object
  ClusterStatus:
    description: >-
      Cluster status computed from all status conditions.


      This object is computed by the service and CANNOT be modified directly.

      It is aggregated from condition updates posted to
      `/clusters/{id}/statuses`.


      Provides quick overview of all reported conditions.
    properties:
      conditions:
        description: >-
          List of status conditions for the cluster.


          **Mandatory conditions**: 

          - `type: "Ready"`: Whether all adapters report successfully at the
          current generation.

          - `type: "Available"`: Aggregated adapter result for a common
          observed_generation.   


          These conditions are present immediately upon resource creation.
        items:
          $ref: '#/definitions/ResourceCondition'
        minItems: 2
        type: array
    required:
      - conditions
    type: object
  DNSSpec:
    properties:
      baseDomain:
        type: string
    type: object
  Error:
    description: RFC 9457 Problem Details error format with HyperFleet extensions
    properties:
      code:
        description: Machine-readable error code in HYPERFLEET-CAT-NUM format
        example: HYPERFLEET-VAL-001
        type: string
      detail:
        description: Human-readable explanation specific to this occurrence
        example: The cluster name field is required
        type: string
      errors:
        description: Field-level validation errors (for validation failures)
        items:
          $ref: '#/definitions/ValidationError'
        type: array
      instance:
        description: URI reference for this specific occurrence
        example: /api/hyperfleet/v1/clusters
        format: uri
        type: string
      status:
        description: HTTP status code
        example: 400
        type: integer
      timestamp:
        description: RFC3339 timestamp of when the error occurred
        example: '2024-01-15T10:30:00Z'
        format: date-time
        type: string
      title:
        description: Short human-readable summary of the problem
        example: Validation Failed
        type: string
      trace_id:
        description: Distributed trace ID for correlation
        example: abc123def456
        type: string
      type:
        description: URI reference identifying the problem type
        example: 'https://api.hyperfleet.io/errors/validation-error'
        format: uri
        type: string
    required:
      - type
      - title
      - status
    type: object
  NetworkingSpec:
    properties:
      clusterNetwork:
        items:
          $ref: '#/definitions/ClusterNetworkEntry'
        type: array
      serviceNetwork:
        items:
          type: string
        type: array
    type: object
  NodePool:
    example:
      created_by: user-123@example.com
      created_time: '2021-01-01T00:00:00Z'
      generation: 1
      href: 'https://api.hyperfleet.com/v1/nodepools/nodepool-123'
      id: nodepool-123
      kind: NodePool
      labels:
        environment: production
        pooltype: worker
      name: worker-pool-1
      owner_references:
        href: 'https://api.hyperfleet.com/v1/clusters/cluster-123'
        id: cluster-123
        kind: Cluster
      spec:
        autoscaling:
          enabled: true
          maxNodes: 10
          minNodes: 1
          targetCPUUtilization: 80
        nodeCount: 3
        platform:
          gcp:
            diskSize: 100
            diskType: pd-standard
            labels:
              managedby: hyperfleet
              team: platform
            machineType: n1-standard-4
            preemptible: false
            zones:
              - us-central1-a
              - us-central1-b
          type: gcp
      status:
        conditions:
          - created_time: '2021-01-01T10:00:00Z'
            last_transition_time: '2021-01-01T10:00:00Z'
            last_updated_time: '2021-01-01T10:00:00Z'
            message: All conditions successful for current spec generation
            observed_generation: 1
            reason: ResourceReady
            status: 'True'
            type: Ready
          - created_time: '2021-01-01T10:00:00Z'
            last_transition_time: '2021-01-01T10:00:00Z'
            last_updated_time: '2021-01-01T10:00:00Z'
            message: All conditions successful for observed_generation
            observed_generation: 1
            reason: ResourceAvailable
            status: 'True'
            type: Available
          - created_time: '2021-01-01T10:00:00Z'
            last_transition_time: '2021-01-01T10:00:00Z'
            last_updated_time: '2021-01-01T10:00:00Z'
            message: NodePool validation passed
            observed_generation: 1
            reason: All validations passed
            status: 'True'
            type: ValidationSuccessful
          - created_time: '2021-01-01T10:01:00Z'
            last_transition_time: '2021-01-01T10:01:00Z'
            last_updated_time: '2021-01-01T10:01:00Z'
            message: NodePool has 3 nodes running
            observed_generation: 1
            reason: NodePool provisioned successfully
            status: 'True'
            type: NodePoolSuccessful
      updated_by: user-123@example.com
      updated_time: '2021-01-01T00:00:00Z'
    properties:
      created_by:
        format: email
        type: string
      created_time:
        format: date-time
        type: string
      generation:
        description: >-
          Generation field is updated on customer updates, reflecting the
          version of the "intent" of the customer
        format: int32
        minimum: 1
        type: integer
      href:
        description: Resource URI
        type: string
      id:
        description: Resource identifier
        type: string
      kind:
        description: Resource kind
        type: string
      labels:
        additionalProperties:
          type: string
        description: 'labels for the API resource as pairs of name:value strings'
        type: object
      name:
        description: NodePool name (unique in a cluster)
        maxLength: 63
        minLength: 3
        pattern: '^[a-z0-9]([-a-z0-9]*[a-z0-9])?$'
        type: string
      owner_references:
        $ref: '#/definitions/ObjectReference'
      spec:
        $ref: '#/definitions/NodePoolSpec'
      status:
        $ref: '#/definitions/NodePoolStatus'
      updated_by:
        format: email
        type: string
      updated_time:
        format: date-time
        type: string
    required:
      - name
      - spec
      - created_time
      - updated_time
      - created_by
      - updated_by
      - generation
      - owner_references
      - status
    type: object
  NodePoolCreateRequest:
    example:
      labels:
        environment: production
        pooltype: worker
      name: worker-pool-1
      spec:
        autoscaling:
          enabled: true
          maxNodes: 10
          minNodes: 1
          targetCPUUtilization: 80
        nodeCount: 3
        platform:
          gcp:
            diskSize: 100
            diskType: pd-standard
            labels:
              managedby: hyperfleet
              team: platform
            machineType: n1-standard-4
            preemptible: false
            zones:
              - us-central1-a
              - us-central1-b
          type: gcp
    properties:
      href:
        description: Resource URI
        type: string
      id:
        description: Resource identifier
        type: string
      kind:
        description: Resource kind
        type: string
      labels:
        additionalProperties:
          type: string
        description: 'labels for the API resource as pairs of name:value strings'
        type: object
      name:
        description: NodePool name (unique in a cluster)
        maxLength: 63
        minLength: 3
        pattern: '^[a-z0-9]([-a-z0-9]*[a-z0-9])?$'
        type: string
      spec:
        $ref: '#/definitions/NodePoolSpec'
    required:
      - name
      - spec
    type: object
  NodePoolCreateResponse:
    properties:
      created_by:
        format: email
        type: string
      created_time:
        format: date-time
        type: string
      generation:
        description: >-
          Generation field is updated on customer updates, reflecting the
          version of the "intent" of the customer
        format: int32
        minimum: 1
        type: integer
      href:
        description: Resource URI
        type: string
      id:
        description: Resource identifier
        type: string
      kind:
        description: Resource kind
        type: string
      labels:
        additionalProperties:
          type: string
        description: 'labels for the API resource as pairs of name:value strings'
        type: object
      name:
        description: NodePool name (unique in a cluster)
        maxLength: 63
        minLength: 3
        pattern: '^[a-z0-9]([-a-z0-9]*[a-z0-9])?$'
        type: string
      owner_references:
        $ref: '#/definitions/ObjectReference'
      spec:
        $ref: '#/definitions/NodePoolSpec'
      status:
        $ref: '#/definitions/NodePoolStatus'
      updated_by:
        format: email
        type: string
      updated_time:
        format: date-time
        type: string
    required:
      - name
      - spec
      - created_time
      - updated_time
      - created_by
      - updated_by
      - generation
      - owner_references
      - status
    type: object
  NodePoolList:
    properties:
      items:
        items:
          $ref: '#/definitions/NodePool'
        type: array
      kind:
        type: string
      page:
        format: int32
        type: integer
      size:
        format: int32
        type: integer
      total:
        format: int32
        type: integer
    required:
      - kind
      - page
      - size
      - total
      - items
    type: object
  NodePoolPlatform:
    properties:
      accelerators:
        items:
          $ref: '#/definitions/AcceleratorSpec'
        type: array
      diskSize:
        minimum: 10
        type: integer
      diskType:
        enum:
          - pd-standard
          - pd-ssd
          - pd-balanced
        type: string
      labels:
        additionalProperties:
          type: string
        type: object
      machineType:
        type: string
      preemptible:
        type: boolean
      taints:
        items:
          $ref: '#/definitions/TaintSpec'
        type: array
      zones:
        items:
          type: string
        type: array
    type: object
  NodePoolPlatformSpec:
    properties:
      gcp:
        $ref: '#/definitions/NodePoolPlatform'
      type:
        enum:
          - gcp
        type: string
    required:
      - type
      - gcp
    type: object
  NodePoolSpec:
    properties:
      autoscaling:
        $ref: '#/definitions/AutoscalingSpec'
      nodeCount:
        minimum: 0
        type: integer
      platform:
        $ref: '#/definitions/NodePoolPlatformSpec'
    required:
      - platform
    type: object
  NodePoolStatus:
    description: |-
      NodePool status computed from all status conditions.

      This object is computed by the service and CANNOT be modified directly.
    properties:
      conditions:
        description: >-
          List of status conditions for the nodepool.


          **Mandatory conditions**: 

          - `type: "Ready"`: Whether all adapters report successfully at the
          current generation.

          - `type: "Available"`: Aggregated adapter result for a common
          observed_generation.   


          These conditions are present immediately upon resource creation.
        items:
          $ref: '#/definitions/ResourceCondition'
        minItems: 2
        type: array
    required:
      - conditions
    type: object
  ObjectReference:
    properties:
      href:
        description: Resource URI
        type: string
      id:
        description: Resource identifier
        type: string
      kind:
        description: Resource kind
        type: string
    type: object
  OrderDirection:
    enum:
      - asc
      - desc
    type: string
  ReleaseSpec:
    properties:
      image:
        type: string
      version:
        type: string
    type: object
  ResourceCondition:
    description: >-
      Condition in Cluster/NodePool status

      Used for semantic condition types: "ValidationSuccessful",
      "DNSSuccessful", "NodePoolSuccessful", etc.

      Includes observed_generation and last_updated_time to track
      adapter-specific state
    properties:
      created_time:
        description: When this condition was first created (API-managed)
        format: date-time
        type: string
      last_transition_time:
        description: >-
          When this condition last transitioned status (API-managed)

          Only updated when status changes (True/False), not when reason/message
          changes
        format: date-time
        type: string
      last_updated_time:
        description: >-
          When the corresponding adapter last reported (API-managed)

          Updated every time the adapter POSTs, even if condition status hasn't
          changed

          Copied from AdapterStatus.last_report_time
        format: date-time
        type: string
      message:
        description: Human-readable message
        type: string
      observed_generation:
        description: Generation of the spec that this condition reflects
        format: int32
        type: integer
      reason:
        description: Machine-readable reason code
        type: string
      status:
        $ref: '#/definitions/ResourceConditionStatus'
      type:
        description: Condition type
        type: string
    required:
      - type
      - last_transition_time
      - status
      - observed_generation
      - created_time
      - last_updated_time
    type: object
  ResourceConditionStatus:
    description: Status value for resource conditions
    enum:
      - 'True'
      - 'False'
    type: string
  TaintSpec:
    properties:
      effect:
        enum:
          - NoSchedule
          - PreferNoSchedule
          - NoExecute
        type: string
      key:
        type: string
      value:
        type: string
    required:
      - key
      - effect
    type: object
  ValidationError:
    description: Field-level validation error detail
    properties:
      constraint:
        description: The validation constraint that was violated
        enum:
          - required
          - min
          - max
          - min_length
          - max_length
          - pattern
          - enum
          - format
          - unique
        example: required
        type: string
      field:
        description: JSON path to the field that failed validation
        example: spec.name
        type: string
      message:
        description: Human-readable error message for this field
        example: Cluster name is required
        type: string
      value:
        description: The invalid value that was provided (if safe to include)
    required:
      - field
      - message
    type: object
securityDefinitions:
  BearerAuth:
    in: header
    name: Authorization
    type: apiKey
tags: []
x-components:
  parameters:
    QueryParams.order:
      enum:
        - asc
        - desc
      in: query
      name: order
      required: false
      type: string
    QueryParams.orderBy:
      default: created_time
      in: query
      name: orderBy
      required: false
      type: string
    QueryParams.page:
      default: 1
      format: int32
      in: query
      name: page
      required: false
      type: integer
    QueryParams.pageSize:
      default: 20
      format: int32
      in: query
      name: pageSize
      required: false
      type: integer
    SearchParams:
      description: >-
        Filter results using TSL (Tree Search Language) query syntax.

        Examples: `status.conditions.Ready='True'`, `name in ('c1','c2')`,
        `labels.region='us-east'`
      in: query
      name: search
      required: false
      type: string

